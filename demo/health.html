<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health - My42</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/demo.css">
    <style>
        /* Tooltip styles for hover/tap explainability */
        .kpi-card {
            position: relative;
            cursor: help;
        }
        .kpi-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-top: 0.5rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 8px;
            min-width: 280px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        /* Desktop: hover */
        @media (min-width: 641px) {
            .kpi-card:hover .kpi-tooltip {
                display: block;
            }
        }
        /* Mobile: tap/click to toggle */
        @media (max-width: 640px) {
            .kpi-card {
                cursor: pointer;
            }
            .kpi-card.active .kpi-tooltip {
                display: block;
            }
            .kpi-tooltip {
                position: static;
                transform: none;
                margin-top: 0.75rem;
                width: 100%;
                min-width: 0;
            }
        }
        .kpi-tooltip p {
            margin: 0 0 0.5rem 0;
            font-size: 0.85rem;
            color: #a0a0a0;
        }
        .kpi-tooltip p:last-child {
            margin-bottom: 0;
        }
        .kpi-tooltip strong {
            color: #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="cosmic-bg"></div>

    <!-- App Header -->
    <header class="app-header">
        <div class="app-header-container">
            <a href="../index.html" class="app-header-logo">my42</a>

            <div class="app-header-nav-container">
                <a href="life.html" class="app-header-link">Life</a>
                <a href="goals.html" class="app-header-link">Goals</a>
                <a href="sprints.html" class="app-header-link">Sprints</a>
            </div>

            <div class="app-header-right">
                <button class="app-header-menu-toggle">Menu</button>
                <a href="settings.html" class="app-header-settings">Settings</a>
            </div>
        </div>
    </header>

    <div class="container" style="margin-top: 7rem; max-width: 1100px;">

        <!-- TOP: Health Dashboard (Performance Layer) -->
        <section style="margin-bottom: 3rem; padding-bottom: 3rem; border-bottom: 2px solid rgba(255,255,255,0.1);">

            <div style="text-align: center; margin-bottom: 2rem;">
                <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Health</h1>
                <p style="color: #808080; font-size: 0.95rem;">Agent: Vita</p>
            </div>

            <!-- Health Score + Primary Performance KPIs -->
            <div style="display: grid; grid-template-columns: 200px 1fr; gap: 2rem; margin-bottom: 2rem;">

                <!-- Health Score Circle (secondary) -->
                <div style="display: flex; justify-content: center; align-items: center;">
                    <svg width="160" height="160" viewBox="0 0 160 160">
                        <defs>
                            <linearGradient id="healthGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#14B8A6;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="80" cy="80" r="60" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="12"/>
                        <circle cx="80" cy="80" r="60" fill="none"
                                stroke="url(#healthGradient)"
                                stroke-width="12"
                                stroke-dasharray="377"
                                stroke-dashoffset="49"
                                stroke-linecap="round"
                                transform="rotate(-90 80 80)"/>
                        <text x="80" y="75" text-anchor="middle" fill="#ffffff" font-size="38" font-weight="900">87</text>
                        <text x="80" y="95" text-anchor="middle" fill="#10B981" font-size="13" font-weight="600">▲ +3</text>
                    </svg>
                </div>

                <!-- 4 Primary Performance KPIs -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">

                    <!-- 1. Recovery / Readiness -->
                    <div class="kpi-card" style="padding: 1.25rem; background: rgba(16, 185, 129, 0.05); border-left: 3px solid #10B981; border-radius: 8px;">
                        <p style="font-size: 0.85rem; color: #808080; margin-bottom: 0.5rem;">Recovery / Readiness</p>
                        <p style="font-size: 2rem; font-weight: 900; color: #10B981; margin: 0; line-height: 1;">89%</p>
                        <p style="font-size: 0.85rem; color: #10B981; margin-top: 0.25rem;">High • Ready for intensity</p>
                        
                        <div class="kpi-tooltip">
                            <p><strong>Trigger:</strong> HRV 68ms (↑12% vs baseline), RHR 52bpm (stable).</p>
                            <p><strong>Evidence:</strong> Last 7d: avg sleep 7.6h, quality 82%. No alcohol, 2 rest days.</p>
                            <p style="color: #10B981; font-weight: 600;">→ Cleared for high-intensity session today (strain 15-17).</p>
                        </div>
                    </div>

                    <!-- 2. Sleep -->
                    <div class="kpi-card" style="padding: 1.25rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
                        <p style="font-size: 0.85rem; color: #808080; margin-bottom: 0.5rem;">Sleep (duration + quality)</p>
                        <p style="font-size: 2rem; font-weight: 900; color: #F59E0B; margin: 0; line-height: 1;">7.6h</p>
                        <p style="font-size: 0.85rem; color: #F59E0B; margin-top: 0.25rem;">-0.4h vs target • Debt: -1.2h</p>
                        
                        <div class="kpi-tooltip">
                            <p><strong>Trigger:</strong> Target 8h, averaging 7.6h. Sleep debt accumulating (-1.2h).</p>
                            <p><strong>Evidence:</strong> Last 7d: 3 nights < 7.5h. Quality variable (70-85%). Late bedtimes Mon/Thu.</p>
                            <p style="color: #F59E0B; font-weight: 600;">→ Bedtime 10pm tonight to recover debt. Avoid screen after 9:30pm.</p>
                        </div>
                    </div>

                    <!-- 3. Strain / Activity -->
                    <div class="kpi-card" style="padding: 1.25rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
                        <p style="font-size: 0.85rem; color: #808080; margin-bottom: 0.5rem;">Strain / Activity</p>
                        <p style="font-size: 2rem; font-weight: 900; color: #14B8A6; margin: 0; line-height: 1;">14.2</p>
                        <p style="font-size: 0.85rem; color: #14B8A6; margin-top: 0.25rem;">Optimal zone • 12d streak</p>
                        
                        <div class="kpi-tooltip">
                            <p><strong>Trigger:</strong> 12-day workout streak, avg strain 14.2 (optimal: 13-16).</p>
                            <p><strong>Evidence:</strong> 5 strength sessions, 4 cardio, 3 active recovery. No missed days. Consistency peak.</p>
                            <p style="color: #14B8A6; font-weight: 600;">→ Maintain streak. Consider deload week after day 21 to prevent overtraining.</p>
                        </div>
                    </div>

                    <!-- 4. Consistency -->
                    <div class="kpi-card" style="padding: 1.25rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
                        <p style="font-size: 0.85rem; color: #808080; margin-bottom: 0.5rem;">Consistency (routine)</p>
                        <p style="font-size: 2rem; font-weight: 900; color: #10B981; margin: 0; line-height: 1;">96%</p>
                        <p style="font-size: 0.85rem; color: #10B981; margin-top: 0.25rem;">23/24 routines hit</p>
                        
                        <div class="kpi-tooltip">
                            <p><strong>Trigger:</strong> 96% adherence to scheduled routines (workout + sleep + nutrition).</p>
                            <p><strong>Evidence:</strong> Last 7d: 12/12 workouts, 5/7 sleep targets, 6/7 meal logging. Missed 1 bedtime.</p>
                            <p style="color: #10B981; font-weight: 600;">→ Excellent. Protect sleep consistency to sustain workout streak.</p>
                        </div>
                    </div>

                </div>
            </div>

            <!-- 7-Day Recovery Trend -->
            <div style="background: rgba(255,255,255,0.02); border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
                <p style="font-size: 0.85rem; color: #808080; margin-bottom: 1rem;">7-Day Recovery Trend</p>
                <svg width="100%" height="80" viewBox="0 0 350 80" style="overflow: visible;">
                    <defs>
                        <linearGradient id="recoveryLineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#10B981;stop-opacity:0.5" />
                            <stop offset="100%" style="stop-color:#10B981;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <!-- Recovery line (upward trend) -->
                    <polyline points="10,50 60,48 110,45 160,42 210,40 260,38 310,35"
                              fill="none" stroke="url(#recoveryLineGradient)" stroke-width="3"/>
                    <circle cx="310" cy="35" r="5" fill="#10B981"/>
                    <!-- Labels -->
                    <text x="10" y="70" fill="#808080" font-size="10" text-anchor="middle">Mon</text>
                    <text x="60" y="70" fill="#808080" font-size="10" text-anchor="middle">Tue</text>
                    <text x="110" y="70" fill="#808080" font-size="10" text-anchor="middle">Wed</text>
                    <text x="160" y="70" fill="#808080" font-size="10" text-anchor="middle">Thu</text>
                    <text x="210" y="70" fill="#808080" font-size="10" text-anchor="middle">Fri</text>
                    <text x="260" y="70" fill="#808080" font-size="10" text-anchor="middle">Sat</text>
                    <text x="310" y="70" fill="#808080" font-size="10" text-anchor="middle">Sun</text>
                </svg>
                <p style="font-size: 0.85rem; color: #10B981; margin-top: 0.5rem;">Improving trend • Recovery 82% → 89%</p>
            </div>

            <!-- Capacity Signal -->
            <div style="padding: 1rem; background: rgba(102, 126, 234, 0.05); border-left: 3px solid #667eea; border-radius: 8px;">
                <p style="font-size: 0.9rem; color: #667eea; font-weight: 600; margin-bottom: 0.5rem;">Capacity Today</p>
                <p style="font-size: 0.95rem; color: #e0e0e0; margin: 0;">
                    <strong style="color: #10B981;">Physical: High</strong> • 
                    <strong style="color: #14B8A6;">Mental: Medium-High</strong> • 
                    <strong style="color: #F59E0B;">Time: Medium</strong> (11h work scheduled)
                </p>
                <p style="font-size: 0.85rem; color: #808080; margin-top: 0.5rem;">Physical capacity supports Launch Sprint intensity. Mental capacity stable. Time constrained.</p>
            </div>

        </section>

        <!-- SECTION: Medical Alerts (Medical Layer) -->
        <section style="margin-bottom: 3rem;">
            <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem;">Medical Record & Alerts</h2>

            <div style="display: grid; gap: 1rem;">

                <!-- Upcoming Checkups -->
                <div style="padding: 1.5rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
                    <h3 style="font-size: 1.1rem; color: #e0e0e0; margin-bottom: 1rem;">Upcoming Checkups</h3>
                    <div style="display: grid; gap: 0.75rem;">
                        <div style="padding: 0.75rem; background: rgba(245, 158, 11, 0.05); border-left: 3px solid #F59E0B; border-radius: 6px;">
                            <p style="font-size: 0.9rem; color: #F59E0B; font-weight: 600; margin-bottom: 0.25rem;">Blood Panel (Annual) — Overdue</p>
                            <p style="font-size: 0.85rem; color: #a0a0a0;">Last: Jan 2025 (12 months ago). Recommended: every 12 months.</p>
                        </div>
                        <div style="padding: 0.75rem; background: rgba(255,255,255,0.02); border-left: 3px solid #808080; border-radius: 6px;">
                            <p style="font-size: 0.9rem; color: #e0e0e0; font-weight: 600; margin-bottom: 0.25rem;">Dental Cleaning — Scheduled Feb 18</p>
                            <p style="font-size: 0.85rem; color: #a0a0a0;">Dr. Martinez, 2pm. Location: Downtown Dental.</p>
                        </div>
                        <div style="padding: 0.75rem; background: rgba(255,255,255,0.02); border-left: 3px solid #808080; border-radius: 6px;">
                            <p style="font-size: 0.9rem; color: #e0e0e0; font-weight: 600; margin-bottom: 0.25rem;">Eye Exam — Due March 2026</p>
                            <p style="font-size: 0.85rem; color: #a0a0a0;">Last: March 2024. Recommended: every 2 years.</p>
                        </div>
                        <div style="padding: 0.75rem; background: rgba(255,255,255,0.02); border-left: 3px solid #808080; border-radius: 6px;">
                            <p style="font-size: 0.9rem; color: #e0e0e0; font-weight: 600; margin-bottom: 0.25rem;">Physical Exam — Scheduled April 12</p>
                            <p style="font-size: 0.85rem; color: #a0a0a0;">Dr. Chen, 10am. Annual physical with vitals review.</p>
                        </div>
                    </div>
                </div>

                <!-- Medication / Reminders -->
                <div style="padding: 1.5rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
                    <h3 style="font-size: 1.1rem; color: #e0e0e0; margin-bottom: 1rem;">Active Medications & Supplements</h3>
                    <div style="display: grid; gap: 0.5rem;">
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <span style="font-size: 0.9rem; color: #e0e0e0;">Vitamin D3 (5000 IU)</span>
                            <span style="font-size: 0.85rem; color: #808080;">Daily, morning</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <span style="font-size: 0.9rem; color: #e0e0e0;">Omega-3 (2000mg EPA/DHA)</span>
                            <span style="font-size: 0.85rem; color: #808080;">Daily, with meal</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem 0;">
                            <span style="font-size: 0.9rem; color: #e0e0e0;">Magnesium Glycinate (400mg)</span>
                            <span style="font-size: 0.85rem; color: #808080;">Daily, evening</span>
                        </div>
                    </div>
                </div>

                <!-- Follow-up Recommended -->
                <div style="padding: 1.5rem; background: rgba(245, 158, 11, 0.05); border-left: 3px solid #F59E0B; border-radius: 8px;">
                    <h3 style="font-size: 1.1rem; color: #F59E0B; margin-bottom: 1rem;">Follow-up Recommended</h3>
                    <p style="font-size: 0.95rem; color: #e0e0e0; margin-bottom: 0.5rem; font-weight: 600;">Blood panel overdue (12 months since last)</p>
                    <p style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 0.75rem;">
                        <strong style="color: #e0e0e0;">Trigger:</strong> Annual checkup interval exceeded. Last panel: Jan 2025.
                    </p>
                    <p style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 0.75rem;">
                        <strong style="color: #e0e0e0;">Evidence:</strong> No current symptoms. Routine preventive screening. Standard lipid + metabolic panel recommended.
                    </p>
                    <p style="font-size: 0.9rem; color: #F59E0B; font-weight: 600;">
                        → Suggested: Schedule blood panel this week. Fasting required. Review results in health-labs.html.
                    </p>
                </div>

            </div>
        </section>

        <!-- SECTION: Contribution to Life Score -->
        <section style="margin-bottom: 3rem; padding: 1.5rem; background: rgba(16, 185, 129, 0.05); border-left: 3px solid #10B981; border-radius: 8px;">
            <h3 style="font-size: 1.1rem; margin-bottom: 1rem; color: #10B981;">Impact on Life Score</h3>
            <p style="color: #a0a0a0; margin-bottom: 0.75rem; font-size: 0.95rem;">
                <strong style="color: #10B981;">Highest Impact Sphere</strong> — Health is weighted at 25% of your Life Score.
            </p>
            <p style="color: #a0a0a0; margin-bottom: 0.75rem; font-size: 0.95rem;">
                <strong>Sensitivity:</strong> +10 Health stability → +2.5 Life Score
            </p>
            <p style="color: #10B981; font-weight: 600; font-size: 0.95rem; margin-bottom: 1.5rem;">
                Current role: <strong>Top driver</strong> — 12-day workout streak + high recovery pushing Life Score upward by ~0.8 points
            </p>

            <!-- Explainable insight -->
            <div style="background: rgba(255,255,255,0.02); border-radius: 8px; padding: 1.25rem; margin-top: 1rem;">
                <h4 style="color: #e0e0e0; margin-bottom: 0.75rem; font-size: 1rem;">Why Health score rose +3 this week</h4>
                <p style="color: #a0a0a0; margin-bottom: 0.5rem; font-size: 0.9rem;">
                    <strong style="color: #e0e0e0;">Trigger:</strong> Workout streak reached 12 days (longest this year). Recovery improved 82% → 89%.
                </p>
                <p style="color: #a0a0a0; margin-bottom: 0.5rem; font-size: 0.9rem;">
                    <strong style="color: #e0e0e0;">Evidence:</strong> Zero missed sessions. Avg strain 14.2 (optimal zone). HRV trending up (+12% vs baseline). Sleep quality stable (avg 82%).
                </p>
                <p style="color: #a0a0a0; margin-bottom: 0.5rem; font-size: 0.9rem;">
                    <strong style="color: #e0e0e0;">Interpretation:</strong> Consistency compounding. Training stimulus matched with recovery capacity. Sustainable pace established.
                </p>
                <p style="color: #10B981; font-weight: 600; font-size: 0.9rem;">
                    → Suggested action: Protect sleep (10pm bedtime) to maintain recovery quality. Plan deload after day 21 to prevent overtraining.
                </p>
            </div>
        </section>

        <!-- SECTION: Today Actions -->
        <section style="margin-bottom: 3rem;">
            <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem;">Today</h2>

            <div class="task-list">
                <div class="task-row">
                    <input type="checkbox">
                    <span class="task-text">7am strength session — 45min, high intensity (strain 15-17 target)</span>
                    <span class="task-tag task-tag-health">Routine</span>
                </div>
                <div class="task-row">
                    <input type="checkbox">
                    <span class="task-text">10pm bedtime — reduce sleep debt, target 8h tonight</span>
                    <span class="task-tag task-tag-health">Intervention</span>
                </div>
                <div class="task-row">
                    <input type="checkbox">
                    <span class="task-text">Schedule blood panel — call Dr. Chen's office, fasting required</span>
                    <span class="task-tag task-tag-health">Action</span>
                </div>
            </div>
        </section>

        <!-- NAV LINKS: Deep Dives -->
        <section style="margin-bottom: 3rem;">
            <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem;">Explore Health</h2>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                <a href="health-checkups.html" class="card" style="text-decoration: none; color: inherit; background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(16, 185, 129, 0.2);">
                    <h4 style="color: #10B981; margin-bottom: 0.5rem;">Checkups & Preventive Plan</h4>
                    <p style="font-size: 0.9rem; color: #a0a0a0;">4 upcoming, 1 overdue</p>
                </a>
                <a href="health-labs.html" class="card" style="text-decoration: none; color: inherit; background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(16, 185, 129, 0.2);">
                    <h4 style="color: #10B981; margin-bottom: 0.5rem;">Labs & Biomarkers</h4>
                    <p style="font-size: 0.9rem; color: #a0a0a0;">Last panel: Jan 2025 (12mo ago)</p>
                </a>
            </div>
        </section>

        <!-- Agent Dialog -->
        <section style="margin-bottom: 4rem; padding: 1.5rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
            <h3 style="font-size: 1.1rem; margin-bottom: 1rem; color: #10B981;">Vita (Health Agent)</h3>

            <div style="margin-bottom: 1rem;">
                <div style="padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 6px; margin-bottom: 0.5rem;">
                    <p style="font-size: 0.85rem; color: #808080; margin-bottom: 0.25rem;">2 hours ago</p>
                    <p style="font-size: 0.95rem; color: #e0e0e0;">87. Strong momentum. 12-day streak exceptional. Recovery 89%, cleared for high intensity today. Sleep debt exists (-1.2h) but manageable. ONE ACTION: 10pm bedtime tonight.</p>
                </div>
                <div style="padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 6px; margin-bottom: 0.5rem;">
                    <p style="font-size: 0.85rem; color: #808080; margin-bottom: 0.25rem;">Yesterday</p>
                    <p style="font-size: 0.95rem; color: #e0e0e0;">Blood panel overdue. Preventive care matters. Schedule this week. Takes 20min, fasting required.</p>
                </div>
            </div>

            <input type="text" placeholder="Ask Vita anything..." style="width: 100%; padding: 0.75rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #e0e0e0; margin-bottom: 1rem; font-family: inherit;">

            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <button style="padding: 0.5rem 1rem; background: rgba(16, 185, 129, 0.2); border: 1px solid #10B981; border-radius: 6px; color: #10B981; cursor: pointer; font-size: 0.85rem;">Explain streak</button>
                <button style="padding: 0.5rem 1rem; background: rgba(16, 185, 129, 0.2); border: 1px solid #10B981; border-radius: 6px; color: #10B981; cursor: pointer; font-size: 0.85rem;">Show capacity</button>
                <button style="padding: 0.5rem 1rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #808080; cursor: pointer; font-size: 0.85rem;">Snooze</button>
            </div>
        </section>

    </div>

    <script src="../js/tasks.js"></script>
</body>
</html>
